rh._.exports({"3":[[" ","Create a Multiplayer Game"]],"4":[[" ","This page will take you through the detailed steps for creating your first multiplayer game."," ","\n    For information on the Rollback system, read ","Rollback System","."," ","\n    For details on all Rollback functions, read ","Rollback Functions",".\n  "],[" ","Start a new project, and create a sprite for your player object. You can import an image or just create a filled square."," ","Create two objects:"," ","obj_game",": This will manage your multiplayer game."," ","obj_player",": This will be your actual player object. Each connected player will have their own instance of this object that they can control."," ","\n      Assign your player sprite to the player object.\n    "," ","Go ahead and place ","obj_game"," into a room. ","Don't"," place ","obj_player",", as it will be created automatically."],[" ","Add the Create event to ","obj_game",", and write the following code in it:"," ","NOTE"," If you're using GML Visual, use the corresponding ","Rollback Actions","."," ","rollback_define_player(obj_player);"," ","\n    var _joined = rollback_join_game();"," ","\n    if (!_joined)","\n    {","\n        rollback_create_game(2);","\n    }\n  "," ","It first defines the player object to use, and attempts to join a game using ","rollback_join_game()",". This function returns ","true"," if the system found a game to join (meaning you are on the correct URL)."," ","If the game could not be joined, it returns ","false",". When the returned value is ","false",", we call ","rollback_create_game()"," to host our own game. There we specify that the game should allow a maximum of 2 players."," ","NOTE"," At the moment, you can only create games for up to 4 players."," ","The code above will create two instances of ","obj_player"," at the top-left corner of the room, but they will not yet be controllable."],[" ","Input is managed by the Rollback system and automatically synchronised between players."," ","In your player object, call ","rollback_get_input()"," to get a struct containing all of the default inputs, which are as follows:"," ","left",", ","right",", ","up",", ","down",", ","Z",", ","X",", ","C",", ","space"," ","These indicate whether the key is held."," ","*","_pressed"," ","and ","*","_released"," ","variants are also provided."," ","To define your own inputs, see ","Defining Inputs","."," ","Now set up the player with the following code in its Create and Step events:"," ","// Create Event","\n    move_speed = 5;"," ","\n    // Step Event","\n    var _input = rollback_get_input();"," ","\n    if (_input.left) x -= move_speed;","\n    if (_input.right) x += move_speed;","\n    if (_input.up) y -= move_speed;","\n    if (_input.down) y += move_speed;\n  "," ","This sets up a variable with the speed of the player, and in the Step event, gets the input struct."," ","Based on each arrow key held, it moves the instance on the corresponding axis, e.g. pressing left reduces the X, pressing up reduces the Y, and so on."],[" ","Before we test, let's ensure the players are created at specific locations, instead of spawning at the top-left corner of the room."," ","In the Create event of your player object, write this:"," ","if (player_id == 0)","\n    {","\n        x = 300;","\n    }","\n    else if (player_id == 1)","\n    {","\n        x = room_width - 300;","\n    }"," ","\n    y = room_height / 2;\n  "," ","player_id"," is a built-in instance variable that stores the ID of the player instance."," ","Since our game has two players, our first player will have the ID ","0",", and the second player will have the ID ","1","."," ","Based on that, we are changing the initial X position of the player. The Y position is the same for both."," ","Now run the game, and you will see both players, where you can control the first one:"," ","The second player is moving erratically on its own, which is a feature of the Rollback system. It automatically provides random values every frame for all defined inputs, as a basic form of test for your game."," ","You can disable automatic random movement by calling ","rollback_use_random_input(false)",", or ","set up your own \"mock\" input"," for the other player."],[" ","Your basic multiplayer example is complete, and it's ready to be taken to the internet."," ","By default, the system starts in ","Sync Test"," mode, which is how you test your game offline. To enable online functionality, the second argument of ","rollback_create_game()"," needs to be set to ","false"," (which disables Sync Test)."," ","// obj_game: Create event","\n    rollback_define_player(obj_player);"," ","\n    var _joined = rollback_join_game();"," ","\n    if (!_joined)","\n    {","\n        rollback_create_game(2, false);","\n    }\n  "," ","Sign into ","GX.games"," and set a region in your ","profile settings","."," ","Run the game through the ","GX.games"," target. When the Rollback system begins, it creates a new \"room\": not a GameMaker room asset, but a ","virtual room"," in which the players will play together."],[" ","When your game starts, you will not see the player instances immediately. Instead, the system will wait for all players to join before starting the game."," ","TIP"," You can start the game before players have joined by calling ","rollback_start_game()",". If you call ","rollback_use_manual_start()"," then the game will wait for you to start it manually even after all players have joined."," ","While waiting, you will see a \"","Copy Share Url","\" button below your game. Scroll down if you don't see the button."," ","This will copy a link to your game, which you can paste into another browser window to join as the second player."," ","You need to have both browser windows visible at the same time, otherwise the player whose window is hidden will time out and your game will end."," ","Once both game instances have connected and synchronised, you will be able to control each player through its browser window:"," ","You can open both windows side-by-side by dragging and resizing them."," ","During your test you will see debug messages in the top-left corner of your game, giving you info on the state of your game. You can disable this by calling ","rollback_display_events(false)","."],[" ","Call ","rollback_leave_game()"," to make a player leave the room. Read the ","function page"," for detailed information on its use."],[" ","The Rollback system will automatically create player instances when all players have joined, as long as you're using ","rollback_define_player()","."," ","However it still allows you to run any other code before the game starts, meaning you must take care to only start your core game logic once all players have joined."," ","For example, if you're spawning enemy instances using an alarm, only start that alarm once the ","Rollback Start"," event triggers."],[" ","Major events in your game, such as a player winning and ending the level, should be done when all players are synchronised. Otherwise, a wrong prediction might wrongly make a player win, which would appear odd when it eventually rolls back."," ","See the example on ","rollback_sync_on_frame()"," for doing this properly."],[" ","Your first multiplayer game is now complete!"," ","Read the following pages to learn all about the Rollback system:"," ","Rollback System"," ","Defining Inputs"," ","Rollback Constraints"," ","Rollback Events"," ","Player Preferences"," ","You can add chat to your game using ","rollback_chat()","."," ","Back: ","Rollback Multiplayer"," ","Next: ","Rollback System"]],"6":[[" ","© Copyright YoYo Games Ltd. 2023 All Rights Reserved"]],"7":[[" ","Create a Multiplayer Game"]],"11":[[" ","Project Set-Up"],[" ","Starting the Game"],[" ","Moving Players"],[" ","Player Locations"],[" ","Online Connection"],[" ","Inviting Players"],[" ","Leaving a Room"],[" ","Game Logic"],[" ","Major Events"],[" ","Further Reading"]],"id":"2736"})