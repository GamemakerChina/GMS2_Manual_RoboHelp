rh._.exports({"3":[[" ","Rollback Constraints"]],"4":[[" ","The Rollback system has some constraints that you should be aware of. Breaking any of these constraints will result in ","Sync Test"," throwing an error to let you know what's wrong."],[" ","Rollback Multiplayer makes use of the WebTransport API, which ","may not be supported on all browsers",". At the moment, Safari, Firefox and Internet Explorer are unsupported on desktop. Chrome, Firefox, and Safari on mobile are also unsupported."],[" ","You can change rooms while a multiplayer game is active, as long as all the players are connected."," ","Changing the room will cause the game to run its synchronisation process again."," ","Data for managed objects will ","not ","automatically be carried over when a room is changed. You can carry it over manually by using global variables, a persistent object, or by saving the local player's information to a file."," ","Using these options you can save the player's information before a room ends, and apply it back when the player instance is created in a new room."],[" ","When a multiplayer game starts, the following events will run in the given order:"," ","Room Start"," ","Create"," events for ","defined players"," ","Rollback Start"," ","rollback_event_param.first_start"," will be ","true"," ","When you change the room in the middle of a multiplayer game, the following events will run in the given order:"," ","Room End"," ","Clean Up"," events for ","defined players "," ","Room Start"," ","Create"," events for ","defined players"," ","Rollback Start"," ","rollback_event_param.first_start"," will be ","false"],[" ","The ","Destroy"," event of an instance normally runs as soon as it's destroyed, for example, after ","instance_destroy()"," is called. However, the event may not run immediately in a multiplayer game."," ","An ","instance_destroy()"," call can easily be run by a wrong prediction, which means that the destruction of the instance will soon be rolled back when the correct data from the responsible player is received."," ","Due to this, the Destroy event of an instance is only called when it's confirmed that it was supposed to be destroyed. This means there may be a slight lag in the instance being destroyed on a player's screen, and its Destroy event being called."," ","If you want something to happen on a client's screen on the same frame as an instance being destroyed, it's recommended to create a custom function and calling it along with ","instance_destroy()","."," ","This also applies to the ","Clean Up"," event running on an instance being destroyed."],[" ","Rollback Multiplayer manages the \"state\" of your game between clients, which includes managed instances and their variables. Such managed parts of your game are able to be rolled back in case of a wrong prediction by the Rollback system."," ","When you create or destroy a managed instance, or modify any properties/variables in a managed instance, you are updating the state of your game. This state is ","not"," sent to other players, as only ","input"," is shared for all clients."," ","There are some restrictions with managing your game's state that you should follow to ensure proper synchronisation between players."],[" ","You must ensure that each player starts at the same game state. This means that everything about your game and its managed instances must be the same for all players when the ","Rollback Start"," event triggers, which is when the game actually starts."," ","You can run any creation or set-up code for your managed instances before that point, as long as it's done in exactly the same manner for all clients. To know if the game has started, use ","rollback_game_running","."," ","You can use the time between your start/join call and the ","Rollback Start"," event to display a loading screen for the players waiting."," ","The player is returned to the same state on ","leaving a game",", meaning the use of ","rollback_game_running"," is necessary to ensure that any game logic only runs while the game is connected."],[" ","You cannot have global variables affecting your game state, as they are not synchronised between players. All required variables should be within managed objects."],[" ","You cannot change the state in a Draw event, and its purpose must remain to only draw graphics based on the state set in previous events. All managed objects become read-only during a Draw event, so you cannot change any variables in them, and you cannot create or destroy instances of managed objects."],[" ","Do not use variables/functions like ","current_time"," or ","get_timer()"," to affect game logic. A managed variable called ","rollback_current_frame"," has been provided which can be used instead. It returns the number of frames that have passed since the multiplayer game began."," ","Alarm events"," are safe to use in managed objects."," ","Also make sure that you don't use ","delta_time",", as it is highly dependent on the system running the game and cannot be synchronised between players."],[" ","An instance ID stored in a managed instance must point to a managed instance."," ","If a managed instance has a reference to a non-managed instance, it will result in inconsistencies between client states, as changes to that non-managed instance can't be managed and rolled back."," ","For example, if your managed ","obj_workstation"," instance has a reference to an ","obj_anvil"," instance, ","obj_anvil"," must be a managed object."],[" ","A variable inside a managed instance, containing a reference to another managed instance, will be set to ","undefined"," if the referenced instance is destroyed."," ","This means that if a variable in a ","persistent"," managed instance contains a reference to a ","non-persistent"," managed instance, that variable will be set to ","undefined"," when the room changes, as the non-persistent instance would stop existing."],[" ","Random number generation (RNG) state is managed between players, so it's completely safe to use random functions (e.g. ","random()",", ","choose()",", etc.) for game logic. The Rollback system will ensure that each player gets the same random number at the same point in the game."," ","Draw events use a separate RNG state. This means that random functions called in a Draw event will not affect the regular RNG state for other events, and may not be the same between different players."],[" ","You can't use ","randomise()"," or ","random_set_seed()"," to change the RNG seed, as it's managed by the Rollback system."," ","The managed RNG state only starts when ","Rollback Start"," is called, which is when the multiplayer game starts. You can change the seed before that point, which will not have any affect past the starting point."],[" ","Read the following pages for more information on the Rollback system:"," ","Rollback Events"," ","Create a Multiplayer Game"," ","Rollback System"," ","Defining Inputs"," ","Back: ","Rollback Multiplayer"," ","Next: ","Rollback Events"]],"6":[[" ","© Copyright YoYo Games Ltd. 2023 All Rights Reserved"]],"7":[[" ","Rollback Constraints"]],"10":[[" ","State Before Rollback Start"],[" ","Global State"],[" ","Draw Event State"],[" ","Time Variables"],[" ","Instance References"],[" ","Lost Instance References"],[" ","Seeds"]],"11":[[" ","Browser Support"],[" ","Rooms"],[" ","Event Order"],[" ","Destroy event"],[" ","State Management"],[" ","Random Numbers"],[" ","Further Reading"]],"id":"2749"})